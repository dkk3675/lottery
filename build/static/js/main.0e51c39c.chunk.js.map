{"version":3,"sources":["web3.js","lottery.js","lottery.png","App.js","index.js"],"names":["web3","Web3","window","ethereum","contract","eth","Contract","constant","inputs","name","outputs","type","payable","stateMutability","process","App","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleAccountsChanged","accounts","isManager","state","manager","toLowerCase","setState","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","event","wrap","_context2","prev","next","preventDefault","value","showErrorMessage","abrupt","button","getAccounts","sent","showWaitingForTransactionMessage","lottery","methods","enter","send","from","utils","toWei","then","_ref2","_callee","details","players","balance","_context","toast","dismiss","showTransactionMessage","concat","transactionHash","getPlayers","getBalance","options","address","stop","_x2","apply","arguments","catch","err","_x","message","success","position","autoClose","closeOnClick","style","width","info","closeButton","error","onClick","_callee5","_context5","length","pickWinner","_ref4","_callee4","_context4","winner","_ref5","_callee3","timestamp","_context3","Date","toLocaleString","timeZoneName","timeZone","weekday","year","month","day","hour12","hour","minute","second","axios","post","no_of_participations","fromWei","response","previousWinner","data","console","log","_x4","_x3","_createClass","key","_componentDidMount","_callee6","_context6","request","method","on","this","get","createdAt","id","removeListener","_this2","_jsxs","className","children","_jsx","ToastContainer","src","LotteryImage","alt","selectedAddress","placeholder","onChange","target","required","disabled","openModal","href","rel","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0e51c39c.chunk.js","sourcesContent":["import Web3 from 'web3';\r\n\r\n// window.ethereum.request({ method: 'eth_requestAccounts' });\r\nlet web3 = new Web3(window.ethereum);\r\n// console.log(web3);\r\n\r\nexport default web3;","import web3 from \"./web3\";\r\n\r\nconst abi = [\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"manager\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: false,\r\n    inputs: [],\r\n    name: \"pickWinner\",\r\n    outputs: [],\r\n    payable: true,\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"getPlayers\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address[]\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"winner\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: false,\r\n    inputs: [],\r\n    name: \"enter\",\r\n    outputs: [],\r\n    payable: true,\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"uint256\",\r\n      },\r\n    ],\r\n    name: \"players\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [],\r\n    payable: false,\r\n    stateMutability: \"nonpayable\",\r\n    type: \"constructor\",\r\n  },\r\n];\r\n\r\nconst contract = new web3.eth.Contract(abi, process.env.REACT_APP_CONTRACT_ADDRESS);\r\nexport default contract;\r\n","export default __webpack_public_path__ + \"static/media/lottery.1bae6b1d.png\";","import \"./App.css\";\nimport React from \"react\";\nimport web3 from \"./web3\";\nimport lottery from \"./lottery\";\nimport axios from \"axios\";\nimport LotteryImage from \"./lottery.png\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { toast } from \"react-toastify\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      manager: \"\",\n      players: [],\n      balance: \"\",\n      value: \"\",\n      previousWinner: \"--\",\n      button: true,\n      isManager: false,\n    };\n  }\n\n  async componentDidMount() {\n    if (!window.ethereum) return;\n    const accounts = await window.ethereum.request({\n      method: \"eth_requestAccounts\",\n    });\n    window.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n    const manager = await lottery.methods.manager().call();\n    const isManager = manager.toLowerCase() === accounts[0].toLowerCase();\n\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n    const winner = await axios\n      .get(process.env.REACT_APP_SERVER)\n      .catch((err) => console.log(err));\n\n    const timestamp = new Date(winner.data.createdAt);\n\n    this.setState({\n      manager: manager,\n      players: players,\n      balance: balance,\n      previousWinner: winner.data.id\n        ? `${winner.data.winner} [ declared on ${timestamp.toLocaleString(\n            \"en\",\n            {\n              timeZoneName: \"long\",\n              timeZone: \"IST\",\n              weekday: \"short\",\n              year: \"numeric\",\n              month: \"short\",\n              day: \"numeric\",\n              hour12: true,\n              hour: \"numeric\",\n              minute: \"numeric\",\n              second: \"numeric\",\n            }\n          )} ] won ${winner.data.value} ether`\n        : \"--\",\n      isManager: isManager,\n    });\n  }\n\n  handleAccountsChanged = (accounts) => {\n    // Check if the current selected account is the manager\n    const isManager =\n      this.state.manager.toLowerCase() === accounts[0].toLowerCase();\n    this.setState({ isManager });\n  };\n\n  componentWillUnmount() {\n    // Remove the event listener when the component unmounts\n    if (window.ethereum) {\n      window.ethereum.removeListener(\n        \"accountsChanged\",\n        this.handleAccountsChanged\n      );\n    }\n  }\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n    if (this.state.value <= 0.01) {\n      this.showErrorMessage(\n        `Ether of value greater than 0.01 ether is required to enter`\n      );\n      return;\n    }\n    this.setState({ button: false });\n    const accounts = await web3.eth.getAccounts();\n    this.showWaitingForTransactionMessage();\n    await lottery.methods\n      .enter()\n      .send({\n        from: accounts[0],\n        value: web3.utils.toWei(this.state.value, \"ether\"),\n      })\n      .then(async (details) => {\n        toast.dismiss();\n        this.showTransactionMessage(\n          `Transaction completed. Transaction ID - ${details.transactionHash}`\n        );\n        const players = await lottery.methods.getPlayers().call();\n        const balance = await web3.eth.getBalance(lottery.options.address);\n        this.setState({ players: players, balance: balance, value: \"\" });\n      })\n      .catch((err) => {\n        toast.dismiss();\n        this.showErrorMessage(\"Transaction Aborted by User.\");\n      });\n    this.setState({ button: true });\n  };\n\n  showTransactionMessage = (message) => {\n    toast.success(message, {\n      position: \"top-left\",\n      autoClose: false,\n      closeOnClick: true,\n      style: {\n        width: \"fit-content\",\n      },\n    });\n  };\n\n  showWaitingForTransactionMessage = () => {\n    toast.info(\"Waiting for transaction to complete...\", {\n      position: \"top-left\",\n      autoClose: false, // Keep the toast open until you manually close it\n      closeOnClick: false, // Prevent the user from closing the toast\n      closeButton: false,\n    });\n  };\n\n  showErrorMessage = (message) => {\n    toast.error(message, { position: \"top-left\", autoClose: 3000 });\n  };\n\n  onClick = async () => {\n    const accounts = await web3.eth.getAccounts();\n    // console.log(accounts);\n    if (accounts[0] !== this.state.manager) {\n      this.showErrorMessage(\"You do not have the authority.\");\n      return;\n    }\n    if (this.state.players.length === 0) {\n      this.showErrorMessage(\"No players found.\");\n      return;\n    }\n    this.setState({ button: false });\n    this.showWaitingForTransactionMessage();\n    await lottery.methods\n      .pickWinner()\n      .send({\n        from: accounts[0],\n      })\n      .then(async (details) => {\n        await lottery.methods\n          .winner()\n          .call()\n          .then(async (winner) => {\n            const timestamp = new Date().toLocaleString(\"en\", {\n              timeZoneName: \"long\",\n              timeZone: \"IST\",\n              weekday: \"short\",\n              year: \"numeric\",\n              month: \"short\",\n              day: \"numeric\",\n              hour12: true,\n              hour: \"numeric\",\n              minute: \"numeric\",\n              second: \"numeric\",\n            });\n            await axios\n              .post(process.env.REACT_APP_SERVER, {\n                winner: winner,\n                no_of_participations: this.state.players.length,\n                value: web3.utils.fromWei(this.state.balance, \"ether\"),\n              })\n              .then((response) => {\n                toast.dismiss();\n                this.showTransactionMessage(\"A winner has been picked.\");\n                this.setState({\n                  players: [],\n                  balance: \"\",\n                  previousWinner: `${response.data.winner} [ declared on ${timestamp} ] won ${response.data.value} ether`,\n                });\n              })\n              .catch((err) => console.log(err));\n          });\n      })\n      .catch((err) => {\n        toast.dismiss();\n        this.showErrorMessage(\n          \"Winner is not picked yet as per manager's preferences.\"\n        );\n      });\n    this.setState({ button: true });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer position=\"top-left\" />\n        <img src={LotteryImage} alt=\"Lottery\" className=\"lottery-image\" />\n        <h2>LOTTERY CONTRACT</h2>\n        {window.ethereum && window.ethereum.selectedAddress && (\n          <p>\n            The manager of this contract is <b>{this.state.manager}</b>. There\n            are currently <b>{this.state.players.length} people</b> entered,\n            competing to win{\" \"}\n            <b>{web3.utils.fromWei(this.state.balance, \"ether\")} ethers</b>.\n          </p>\n        )}\n\n        <hr />\n\n        {window.ethereum ? (\n          <div>\n            {window.ethereum.selectedAddress ? (\n              <div>\n                <form onSubmit={this.onSubmit} className=\"entry-form\">\n                  <h4>Want to try your luck?</h4>\n                  <div className=\"input-container\">\n                    <label>Amount of ether to enter</label>\n                    <input\n                      type=\"number\"\n                      placeholder=\"Enter value > 0.01 ether\"\n                      value={this.state.value}\n                      onChange={(event) =>\n                        this.setState({ value: event.target.value })\n                      }\n                      required\n                    />\n                  </div>\n                  <button\n                    className=\"entry-button\"\n                    disabled={this.state.manager === \"\" || !this.state.button}\n                    onClick={this.openModal}\n                  >\n                    Enter\n                  </button>\n                </form>\n\n                {this.state.isManager && (\n                  <div className=\"winner-section\">\n                    <hr />\n                    <h4>Time to pick a Winner</h4>\n                    <button\n                      onClick={this.onClick}\n                      className=\"winner-button\"\n                      disabled={!this.state.button}\n                    >\n                      Pick a Winner\n                    </button>\n                  </div>\n                )}\n\n                <hr />\n\n                <h4 className=\"previous-winner\">\n                  Recent Winner: {this.state.previousWinner}\n                </h4>\n\n                <p>\n                  For more details:{\" \"}\n                  <a\n                    target=\"_blank\"\n                    href=\"https://sepolia.etherscan.io/address/0x2c06AFe194FA2942DDcF9DabCaB9B79E2DF396F3\"\n                    rel=\"noreferrer\"\n                  >\n                    Click here\n                  </a>\n                </p>\n              </div>\n            ) : (\n              <div className=\"no-metamask\">\n                <p>Please connect to Metamask to use this application.</p>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"no-metamask\">\n            <p>Please install Metamask to use this application.</p>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}