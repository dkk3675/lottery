{"version":3,"sources":["web3.js","lottery.js","lottery.png","App.js","index.js"],"names":["web3","Web3","window","ethereum","contract","eth","Contract","constant","inputs","name","outputs","type","payable","stateMutability","App","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","manager","players","balance","value","previousWinner","button","isManager","handleAccountsChanged","accounts","toLowerCase","setState","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","event","wrap","_context2","prev","next","preventDefault","showErrorMessage","abrupt","getAccounts","sent","showWaitingForTransactionMessage","lottery","methods","enter","send","from","utils","toWei","then","_ref2","_callee","details","_context","toast","dismiss","showTransactionMessage","transactionHash","getPlayers","getBalance","options","address","stop","_x2","catch","err","_x","message","success","position","autoClose","closeOnClick","style","width","info","closeButton","error","onClick","_callee5","_context5","pickWinner","_ref4","_callee4","_context4","winner","_ref5","_callee3","timestamp","_context3","Date","toLocaleString","timeZoneName","timeZone","weekday","year","month","day","hour12","hour","minute","second","axios","post","process","no_of_participations","fromWei","response","data","console","log","_x4","_x3","_createClass","key","_componentDidMount","_callee6","_context6","request","method","on","this","get","createdAt","id","removeListener","_this2","_jsxs","className","children","_jsx","ToastContainer","src","LotteryImage","alt","placeholder","onChange","target","required","disabled","openModal","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9813bb7e.chunk.js","sourcesContent":["import Web3 from 'web3';\r\n\r\n// window.ethereum.request({ method: 'eth_requestAccounts' });\r\nlet web3 = new Web3(window.ethereum);\r\n// console.log(web3);\r\n\r\nexport default web3;","import web3 from \"./web3\";\r\n\r\nconst address = \"0x2c06AFe194FA2942DDcF9DabCaB9B79E2DF396F3\";\r\nconst abi = [\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"manager\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: false,\r\n    inputs: [],\r\n    name: \"pickWinner\",\r\n    outputs: [],\r\n    payable: true,\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"getPlayers\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address[]\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [],\r\n    name: \"winner\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: false,\r\n    inputs: [],\r\n    name: \"enter\",\r\n    outputs: [],\r\n    payable: true,\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"uint256\",\r\n      },\r\n    ],\r\n    name: \"players\",\r\n    outputs: [\r\n      {\r\n        name: \"\",\r\n        type: \"address\",\r\n      },\r\n    ],\r\n    payable: false,\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [],\r\n    payable: false,\r\n    stateMutability: \"nonpayable\",\r\n    type: \"constructor\",\r\n  },\r\n];\r\nconst contract = new web3.eth.Contract(abi, address);\r\nexport default contract;\r\n","export default __webpack_public_path__ + \"static/media/lottery.1bae6b1d.png\";","import \"./App.css\";\nimport React from \"react\";\nimport web3 from \"./web3\";\nimport lottery from \"./lottery\";\nimport axios from \"axios\";\nimport LotteryImage from \"./lottery.png\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { toast } from \"react-toastify\";\n\nclass App extends React.Component {\n  state = {\n    manager: \"\",\n    players: [],\n    balance: \"\",\n    value: \"\",\n    previousWinner: \"--\",\n    button: true,\n    isManager: false,\n  };\n\n  async componentDidMount() {\n    const manager = await lottery.methods.manager().call();\n\n    const accounts = await window.ethereum.request({\n      method: \"eth_requestAccounts\",\n    });\n    const isManager = manager.toLowerCase() === accounts[0].toLowerCase();\n    window.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n    const winner = await axios\n      .get(process.env.REACT_APP_SERVER)\n      .catch((err) => console.log(err));\n\n    const timestamp = new Date(winner.data.createdAt);\n\n    this.setState({\n      manager: manager,\n      players: players,\n      balance: balance,\n      previousWinner: winner.data.id\n        ? `${winner.data.winner} [ declared on ${timestamp.toLocaleString(\n            \"en\",\n            {\n              timeZoneName: \"long\",\n              timeZone: \"IST\",\n              weekday: \"short\",\n              year: \"numeric\",\n              month: \"short\",\n              day: \"numeric\",\n              hour12: true,\n              hour: \"numeric\",\n              minute: \"numeric\",\n              second: \"numeric\",\n            }\n          )} ] won ${winner.data.value} ether`\n        : \"--\",\n      isManager: isManager,\n    });\n  }\n\n  handleAccountsChanged = (accounts) => {\n    // Check if the current selected account is the manager\n    const isManager =\n      this.state.manager.toLowerCase() === accounts[0].toLowerCase();\n    this.setState({ isManager });\n  };\n\n  componentWillUnmount() {\n    // Remove the event listener when the component unmounts\n    window.ethereum.removeListener(\n      \"accountsChanged\",\n      this.handleAccountsChanged\n    );\n  }\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n    if (this.state.value <= 0.01) {\n      this.showErrorMessage(\n        `Ether of value greater than 0.01 ether is required to enter`\n      );\n      return;\n    }\n    this.setState({ button: false });\n    const accounts = await web3.eth.getAccounts();\n    this.showWaitingForTransactionMessage();\n    await lottery.methods\n      .enter()\n      .send({\n        from: accounts[0],\n        value: web3.utils.toWei(this.state.value, \"ether\"),\n      })\n      .then(async (details) => {\n        toast.dismiss();\n        this.showTransactionMessage(\n          `Transaction completed. Transaction ID - ${details.transactionHash}`\n        );\n        const players = await lottery.methods.getPlayers().call();\n        const balance = await web3.eth.getBalance(lottery.options.address);\n        this.setState({ players: players, balance: balance, value: \"\" });\n      })\n      .catch((err) => {\n        toast.dismiss();\n        this.showErrorMessage(\"Transaction Aborted by User.\");\n      });\n    this.setState({ button: true });\n  };\n\n  showTransactionMessage = (message) => {\n    toast.success(message, {\n      position: \"top-left\",\n      autoClose: false,\n      closeOnClick: true,\n      style: {\n        width: \"fit-content\",\n      },\n    });\n  };\n\n  showWaitingForTransactionMessage = () => {\n    toast.info(\"Waiting for transaction to complete...\", {\n      position: \"top-left\",\n      autoClose: false, // Keep the toast open until you manually close it\n      closeOnClick: false, // Prevent the user from closing the toast\n      closeButton: false,\n    });\n  };\n\n  showErrorMessage = (message) => {\n    toast.error(message, { position: \"top-left\", autoClose: 3000 });\n  };\n\n  onClick = async () => {\n    const accounts = await web3.eth.getAccounts();\n    // console.log(accounts);\n    if (accounts[0] !== this.state.manager) {\n      this.showErrorMessage(\"You do not have the authority.\");\n      return;\n    }\n    if (this.state.players.length === 0) {\n      this.showErrorMessage(\"No players found.\");\n      return;\n    }\n    this.setState({ button: false });\n    this.showWaitingForTransactionMessage();\n    await lottery.methods\n      .pickWinner()\n      .send({\n        from: accounts[0],\n      })\n      .then(async (details) => {\n        await lottery.methods\n          .winner()\n          .call()\n          .then(async (winner) => {\n            const timestamp = new Date().toLocaleString(\"en\", {\n              timeZoneName: \"long\",\n              timeZone: \"IST\",\n              weekday: \"short\",\n              year: \"numeric\",\n              month: \"short\",\n              day: \"numeric\",\n              hour12: true,\n              hour: \"numeric\",\n              minute: \"numeric\",\n              second: \"numeric\",\n            });\n            await axios\n              .post(process.env.REACT_APP_SERVER, {\n                winner: winner,\n                no_of_participations: this.state.players.length,\n                value: web3.utils.fromWei(this.state.balance, \"ether\"),\n              })\n              .then((response) => {\n                toast.dismiss();\n                this.showTransactionMessage(\"A winner has been picked.\");\n                this.setState({\n                  players: [],\n                  balance: \"\",\n                  previousWinner: `${response.data.winner} [ declared on ${timestamp} ] won ${response.data.value} ether`,\n                });\n              })\n              .catch((err) => console.log(err));\n          });\n      })\n      .catch((err) => {\n        toast.dismiss();\n        this.showErrorMessage(\n          \"Winner is not picked yet as per manager's preferences.\"\n        );\n      });\n    this.setState({ button: true });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer position=\"top-left\" />\n        <img src={LotteryImage} alt=\"Lottery\" className=\"lottery-image\" />\n        <h2>LOTTERY CONTRACT</h2>\n        <p>\n          The manager of this contract is <b>{this.state.manager}</b>. There are\n          currently <b>{this.state.players.length} people</b> entered, competing\n          to win <b>{web3.utils.fromWei(this.state.balance, \"ether\")} ethers</b>\n          .\n        </p>\n\n        <hr />\n\n        <form onSubmit={this.onSubmit} className=\"entry-form\">\n          <h4>Want to try your luck?</h4>\n          <div className=\"input-container\">\n            <label>Amount of ether to enter</label>\n            <input\n              type=\"number\"\n              placeholder=\"Enter value > 0.01 ether\"\n              value={this.state.value}\n              onChange={(event) => this.setState({ value: event.target.value })}\n              required\n            />\n          </div>\n          <button\n            className=\"entry-button\"\n            disabled={this.state.manager === \"\" || !this.state.button}\n            onClick={this.openModal}\n          >\n            Enter\n          </button>\n        </form>\n\n        {this.state.isManager && (\n          <div className=\"winner-section\">\n            <hr />\n            <h4>Time to pick a Winner</h4>\n            <button\n              onClick={this.onClick}\n              className=\"winner-button\"\n              disabled={!this.state.button}\n            >\n              Pick a Winner\n            </button>\n          </div>\n        )}\n        <hr />\n\n        <h4 className=\"previous-winner\">\n          Recent Winner: {this.state.previousWinner}\n        </h4>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}